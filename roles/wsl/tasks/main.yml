- name: Detect WSL
  ansible.builtin.set_fact:
    is_wsl: "{{ 'microsoft' in (ansible_kernel | lower) or 'wsl' in (ansible_kernel | lower) }}"

- name: Print WSL detection
  ansible.builtin.debug:
    msg: "WSL detected: {{ is_wsl }} (kernel={{ ansible_kernel }})"
